# JPA 영속성 관리

-----------

## JPA가 제공하는 기능
1. 엔티티와 테이블을 매핑하는 설계 부분 
2. 매핑한 엔티티를 실제 사용하는 부분

<br>

## 엔티티 매니저란?

>엔티티를 저장하고, 수정하고, 삭제하고, 조회하는 등 **엔티티와 관련된 모든 일**을 처리
>> ex) 엔티티를 저장하는 가상의 데이터베이스

<br>

## 엔티티 매니저 팩토리 

- 엔티티 매니저를 만드는 공장.
  - 공장을 만드는 비용은 상당히 큼
    - 한 개만 만들어서 애플리케이션 전체에서 공유하도록 설계
  
```
// 공장 만들기, 비용이 아주 많이 듦
EntityManagerFactory emf = Persistence.createEntityManagerFacotry("jpabook");

// 공장에서 엔티티 매니저 생성, 비용이 거의 안 든다.
Entitymanager em = emf.createEntityManager();
```

 - **엔티티 매니저 팩토리**는 여러 스레드가 동시에 접근해도 안전 -> _서로 다른 스레드 간에 공유 가능_
 - **엔티티 매니저**는 여러 스레드가 동시에 접근하면 동시성 문제가 발생 -> _스레드 간에 공유 x_

 - 